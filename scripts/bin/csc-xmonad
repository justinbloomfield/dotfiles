#!/bin/sh
# Requires GNU ed (afaict, sorry) and xrq, although you could subsitute xrq with some other xrdb-querying thingy

THEME_DIR=${THEME_DIR:-$HOME/.config/x/colours}
cls=$(ls $THEME_DIR | rofi -dmenu)
echo $cls

sed -i 1d ~/.Xresources 
sed -i "1i #include \"/home/poq/.config/x/colours/$cls\"" ~/.Xresources
xrdb ~/.Xresources
fccl=$(xrq color1)
bgcl=$(xrq color8)
ufccl=$(xrq color17)
ed -s ~/.xmonad/xmonad.hs << EOF
H
/myFocusedColour\ =
s/#.*$/$fccl\"/
/myNormalColour\ =
s/#.*$/$ufccl\"/
w
EOF
pkill -USR1 st 2>/dev/null 
xsetroot -solid $bgcl
xmonad --recompile 
